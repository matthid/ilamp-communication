# Analysis / Reverse Engineering

## Connection 

-> SPP Conection C9:A3:05:FE:BD:41

RFCOMM -> Channel 2

## Other mac addresses???

48:77:DF:1C:0F:04

### SPP Channel 2 (lamp_connect_on_off_idle):

```
Device -> Lamp: 30:31:32:33:34:35:36:37 (string "01234567")
Device -> Lamp: 01:fe:00:00:51:02:10:00:00:00:00:80:00:00:00:80
Lamp -> Device: 01:fe:00:00:41:02:10:00:01:00:00:00:00:00:00:00
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:02:02:01:00:0e:00
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:ff:02:01:00:0e:00
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:ff:02:0b:0e:00:00
Device -> Lamp: 01:fe:00:00:51:00:10:00:00:00:00:80:00:00:00:80 (Keepalive?/Status?)
Lamp -> Device: 01:fe:00:00:41:81:1f:00:00:00:00:00:00:00:00:00:0d:0f:ff:02:01:01:00:04:00:02:f9:02:01:01:0e
Device -> Lamp: 01:fe:00:00:51:81:20:00:00:00:00:00:00:00:00:00:57:41:0f:02:07:e0:11:70:5e:48:05:2b:1f:9e:70:00
Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:ff:02:0b:00:01:0e
Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:c1:9f (Keepalive response)
Lamp -> Device: 01:fe:00:00:41:81:1f:00:00:00:00:00:00:00:00:00:4c:58:0f:02:a2:d1:72:e6:1d:bd:ff:43:86:5b:98
Device -> Lamp: 01:fe:00:00:51:00:10:00:00:00:00:80:00:00:00:80 (Keepalive?/Status?)
Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:c1:9f (Keepalive response)
Device -> Lamp: 01:fe:00:00:53:00:18:00:00:00:00:00:00:00:00:80:e3:07:01:0d:10:32:2a:00
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:02:00:00:0e
Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:02:01:03:0e
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:02:03:00:0e:00
Device -> Lamp: 01:fe:00:00:51:00:10:00:00:00:00:80:00:00:00:80 (Keepalive?/Status?)
Lamp -> Device: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:01:02:03:00:0e
Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:c1:9f (Keepalive response)
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:02:02:14:0e:00:00
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:ff:02:08:0e:00:00
Lamp -> Device: 01:fe:00:00:41:81:1c:00:00:00:00:00:00:00:00:00:0d:0c:02:02:14:01:01:02:02:02:02:0e
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:ff:02:0c:0e:00:00
Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:04:01:00:0e
Device -> Lamp: 01:fe:00:00:51:00:10:00:00:00:00:80:00:00:00:80 (Keepalive?/Status?)
Lamp -> Device: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:ff:02:0c:00:0e
Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:04:01:01:0e
Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:c1:9f (Keepalive response)
Device -> Lamp: 01:fe:00:00:51:00:10:00:00:00:00:80:00:00:00:80 (Keepalive?/Status?)
Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:c1:9f (Keepalive response)
(10x) 
    Device -> Lamp: 01:fe:00:00:51:00:10:00:00:00:00:80:00:00:00:80 (Keepalive?/Status?)
    Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:c1:9f (Keepalive response)
    L->D(one time): 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:00:00 (Keepalive response)

(Removing Keepalive/status and Response from this point)

0806 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:02:0e:00
0809 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:02:03:0e
0816 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:01:0e:00
0819 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:01:03:0e
0820 Lamp -> Device: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:01:04:03:00:0e

0832 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:02:0e:00
0835 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:02:03:0e
0841 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:01:0e:00
0845 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:01:03:0e
0847 Lamp -> Device: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:01:04:03:00:0e
0865 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:02:0e:00
0868 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:02:03:0e
0878 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:01:0e:00
0880 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:01:03:0e
0881 Lamp -> Device: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:01:04:03:00:0e
0894 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:02:0e:00
0896 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:02:03:0e
0899 Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:00:00 (keepalive?)
0903 Device -> Lamp: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:01:0e:00
0905 Lamp -> Device: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:01:03:0e
0906 Lamp -> Device: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:01:04:03:00:0e

1026 Lamp -> Device: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:20:00 (keepalive?)
1113 (Keepalive 20:00)


```

### SPP Channel 2 (lamp_connect_on_off_idle):


```
    ReqA: 01:fe:00:00:51:02:10:00:00:00:00:80:00:00:00:80
    ReqB: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:02:02:01:00:0e:00
    ReqC: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:ff:02:01:00:0e:00
    ReqD: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:ff:02:0b:0e:00:00
    ReqE: 01:fe:00:00:51:81:20:00:00:00:00:00:00:00:00:00:57:41:0f:02:07:e0:11:70:5e:48:05:2b:1f:9e:70:00
    ReqF: 01:fe:00:00:53:00:18:00:00:00:00:00:00:00:00:80:e3:07:01:0d:10:32:2a:00
    ReqG: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:02:00:00:0e
    ReqH: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:02:03:00:0e:00
    ReqI: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:02:02:14:0e:00:00
    ReqJ: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:ff:02:08:0e:00:00
    ReqK: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:06:ff:02:0c:0e:00:00
    ReqL: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:04:01:00:0e
ReqOnOf1: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:02:0e:00
ReqOnOf2: 01:fe:00:00:51:81:18:00:00:00:00:00:00:00:00:00:0d:07:01:03:01:01:0e:00
KeepAliv: 01:fe:00:00:51:00:10:00:00:00:00:80:00:00:00:80
KeepRes1: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:c1:9f
KeepRes2: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:00:00
KeepRes3: 01:fe:00:00:41:00:28:00:00:00:00:00:00:00:00:00:00:1f:00:1f:00:00:00:05:00:00:00:00:00:00:00:00:00:d2:be:62:02:e0:20:00
ResponsA: 01:fe:00:00:41:81:1f:00:00:00:00:00:00:00:00:00:0d:0f:ff:02:01:01:00:04:00:02:f9:02:01:01:0e
ResponsB: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:ff:02:0b:00:01:0e
ResponsC: 01:fe:00:00:41:81:1f:00:00:00:00:00:00:00:00:00:4c:58:0f:02:a2:d1:72:e6:1d:bd:ff:43:86:5b:98
ResponsD: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:02:01:03:0e
ResponsE: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:01:02:03:00:0e
ResponsF: 01:fe:00:00:41:81:1c:00:00:00:00:00:00:00:00:00:0d:0c:02:02:14:01:01:02:02:02:02:0e
ResponsG: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:ff:02:0c:00:0e
ResponsH: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:02:04:01:01:0e
ResOnOf1: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:02:03:0e
ResOnOf2: 01:fe:00:00:41:81:18:00:00:00:00:00:00:00:00:00:0d:08:01:04:01:01:03:0e
ResOnOf3: 01:fe:00:00:41:81:17:00:00:00:00:00:00:00:00:00:0d:07:01:04:03:00:0e



Device -> Lamp: 30:31:32:33:34:35:36:37 (string "01234567")
Device -> Lamp: PatternA
Lamp -> Device: 01:fe:00:00:41:02:10:00:01:00:00:00:00:00:00:00
Device -> Lamp: PatternB
Device -> Lamp: PatternC
Device -> Lamp: PatternD
Lamp -> Device: ResponsA
Device -> Lamp: ReqE
Lamp -> Device: ResponsB
Lamp -> Device: ResponsC
Device -> Lamp: ReqF
Device -> Lamp: ReqG
Lamp -> Device: ResponsD
Device -> Lamp: ReqH
Lamp -> Device: ResponsE
Device -> Lamp: ReqI
Device -> Lamp: ReqJ
Lamp -> Device: ResponsF
Device -> Lamp: ReqK
Device -> Lamp: ReqL
Lamp -> Device: ResponsG
Lamp -> Device: ResponsH
0806 Device -> Lamp: OnOff1
0809 Lamp -> Device: ResOnOf1
0816 Device -> Lamp: ReqOnOf2
0819 Lamp -> Device: ResOnOf2
0820 Lamp -> Device: ResOnOf3

0832 Device -> Lamp: OnOff1
0835 Lamp -> Device: ResOnOf1
0841 Device -> Lamp: ReqOnOf2
0845 Lamp -> Device: ResOnOf2
0847 Lamp -> Device: ResOnOf3
0865 Device -> Lamp: OnOff1
0868 Lamp -> Device: ResOnOf1
0878 Device -> Lamp: ReqOnOf2
0880 Lamp -> Device: ResOnOf2
0881 Lamp -> Device: ResOnOf3
0894 Device -> Lamp: OnOff1
0896 Lamp -> Device: ResOnOf1
0903 Device -> Lamp: ReqOnOf2
0905 Lamp -> Device: ResOnOf2
0906 Lamp -> Device: ResOnOf3

1113 (Keepalive 20:00)


```